/*! Magnific Popup - v1.1.0 - 2016-02-20
* http://dimsemenov.com/plugins/magnific-popup/
* Copyright (c) 2016 Dmitry Semenov; */
(function (factory) { 
if (typeof define === 'function' && define.amd) { 
 define(['jquery'], factory); 
} else if (typeof exports === 'object') { 
 factory(require('jquery')); 
} else { 
 factory(window.jQuery || window.Zepto); 
} 
}(function($) { 
/*>>core*/
/**
 * 
 * Magnific Popup Core JS file
 * 
 */


/**
 * Private static constants
 */
var CLOSE_EVENT = 'Close',
	BEFORE_CLOSE_EVENT = 'BeforeClose',
	AFTER_CLOSE_EVENT = 'AfterClose',
	BEFORE_APPEND_EVENT = 'BeforeAppend',
	MARKUP_PARSE_EVENT = 'MarkupParse',
	OPEN_EVENT = 'Open',
	CHANGE_EVENT = 'Change',
	NS = 'mfp',
	EVENT_NS = '.' + NS,
	READY_CLASS = 'mfp-ready',
	REMOVING_CLASS = 'mfp-removing',
	PREVENT_CLOSE_CLASS = 'mfp-prevent-close';


/**
 * Private vars 
 */
/*jshint -W079 */
var mfp, // As we have only one instance of MagnificPopup object, we don't need to store it locally
	MagnificPopup = function(){},
	_isJQ = !!(window.jQuery),
	_prevStatus,
	_window = $(window),
	_document,
	_prevContentType,
	_wrapClasses,
	_currPopupType;


/**
 * Public functions
 */
var _mfpOn = function(name, f) {
		mfp.ev.on(name + EVENT_NS, f);
	},
	_getEl = function(className, appendTo, html, raw) {
		var el = document.createElement('div');
		el.className = 'mfp-'+className;
		if(html) {
			el.innerHTML = html;
		}
		if(!raw) {
			el = $(el);
			if(appendTo) {
				el.appendTo(appendTo);
			}
		} else if(appendTo) {
			appendTo.appendChild(el);
		}
		return el;
	},
	_mfpTrigger = function(e, data) {
		mfp.ev.triggerHandler(e, data);

		if(mfp.st.callbacks) {
			// converts "mfpEventName" to "eventName" callback function name
			e = e.charAt(0).toLowerCase() + e.slice(1);
			if(mfp.st.callbacks[e]) {
				mfp.st.callbacks[e].apply(mfp, $.isArray(data) ? data : [data]);
			}
		}
	},
	_getCloseBtn = function(type) {
		if(type !== _currPopupType || !mfp.currTemplate.closeBtn) {
			mfp.currTemplate.closeBtn = $( mfp.st.closeMarkup.replace('%title%', mfp.st.tClose ) );
			_currPopupType = type;
		}
		return mfp.currTemplate.closeBtn;
	},
	// Initialize Magnific Popup only when called at least once
	_checkInstance = function() {
		if(!$.magnificPopup.instance) {
			/*jshint -W020 */
			mfp = new MagnificPopup();
			mfp.init();
			$.magnificPopup.instance = mfp;
		}
	},
	// CSS transition detection
	supportsTransitions = function() {
		var s = document.createElement('p').style, // 's' for style. better minification
			v = ['ms','O','Moz','Webkit']; // 'v' for vendor prefixes

		if( s['transition'] !== undefined ) {
			return true; 
		}
			
		while( v.length ) {
			if( v.pop() + 'Transition' in s ) {
				return true;
			}
		}
				
		return false;
	};



/**
 * Popups management
 */
MagnificPopup.prototype = {

	constructor: MagnificPopup,

	/**
	 * Initializes Magnific Popup plugin. 
	 * This function is triggered only once when $.fn.magnificPopup or $.magnificPopup is executed
	 */
	init: function() {
		var appVersion = navigator.appVersion;
		mfp.isLowIE = mfp.isIE8 = document.all && !document.addEventListener;
		mfp.isAndroid = (/android/gi).test(appVersion);
		mfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);
		mfp.supportsTransition = supportsTransitions();

		// We disable fixed positioned lightbox on devices that don't handle it nicely.
		// If you know a better way of detecting this - let me know.
		mfp.probablyMobile = (mfp.isAndroid || mfp.isIOS || /(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent) );
		_document = $(document);

		mfp.ev = $(mfp);
	},

	/**
	 * Opens popup
	 * @param  data [description]
	 */
	open: function(data) {

		if(_prevStatus === 1) {
			return;
		}
		
		var i;

		mfp.isOpened = true;
		mfp.openData = data;

		_prevStatus = 1;

		
		// if items array is not defined, find from selector based on what was clicked
		if(mfp.st.items) {
			mfp.items = mfp.st.items;
		} else {
			mfp.items = [];
			var items = mfp.st.el;
			if(items instanceof $) {
				mfp.items = items;
			} else {
				mfp.items = $(items).get();
			}
			
			mfp.items = mfp.items.slice();

			for(i=0; i<mfp.items.length; i++) {
				mfp.items[i] = {
					src: mfp.items[i]
				};
				if(mfp.items[i].src.tagName) {
					mfp.items[i].el = $(mfp.items[i].src);
				}
			}
		}


		mfp.bgOverlay = _getEl('bg').on('click'+EVENT_NS, function() {
			mfp.close();
		});

		mfp.wrap = _getEl('wrap').attr('tabindex', -1).on('click'+EVENT_NS, function(e) {
			if(mfp._checkIfClose(e.target)) {
				mfp.close();
			}
		});

		mfp.container = _getEl('container', mfp.wrap);

		mfp.st.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);

		// parse markup and append it to container
		_mfpTrigger(MARKUP_PARSE_EVENT, mfp.st.markup);
		mfp.container.append( mfp.contentContainer );


		// General defaults
		var options = {
			key: mfp.st.key,
			focus: mfp.st.focus,
			closeOnContentClick: mfp.st.closeOnContentClick,
			closeOnBgClick: mfp.st.closeOnBgClick,
			closeBtnInside: mfp.st.closeBtnInside,
			alignTop: mfp.st.alignTop,
			removalDelay: mfp.st.removalDelay,

			mainClass: mfp.st.mainClass,
			preloader: mfp.st.preloader,

			// callbacks
			callbacks: {
				open: function() {
					if(mfp.content) {
						mfp.wrap.addClass(READY_CLASS);
						mfp.content.addClass(READY_CLASS);
					} else {
						setTimeout(function() {
							if(mfp.content) {
								mfp.wrap.addClass(READY_CLASS);
								mfp.content.addClass(READY_CLASS);
							}
						}, 16);
					}
				},
				close: function() {
					mfp.wrap.removeClass(READY_CLASS);
					mfp.content.removeClass(READY_CLASS);
				}
			}
		};

		// apply custom options from data-mfp-options attribute
		if(data.hasOwnProperty('mainClass')) {
			options.mainClass = data.mainClass;
		}
		if(data.hasOwnProperty('alignTop')) {
			options.alignTop = data.alignTop;
		}
		if(data.hasOwnProperty('closeOnContentClick')) {
			options.closeOnContentClick = data.closeOnContentClick;
		}
		if(data.hasOwnProperty('closeOnBgClick')) {
			options.closeOnBgClick = data.closeOnBgClick;
		}
		if(data.hasOwnProperty('closeBtnInside')) {
			options.closeBtnInside = data.closeBtnInside;
		}
		if(data.hasOwnProperty('removalDelay')) {
			options.removalDelay = data.removalDelay;
		}
		if(data.hasOwnProperty('key')) {
			options.key = data.key;
		}
		if(data.hasOwnProperty('focus')) {
			options.focus = data.focus;
		}
		

		if(mfp.st.mainClass) {
			mfp.wrap.addClass(mfp.st.mainClass);
		}

		// add custom classes from data-mfp-src
		if(data.mainClass) {
			mfp.wrap.addClass(data.mainClass);
		}

		// add custom classes from data-mfp-src
		if(data.el) {
			var classes = data.el.attr('data-mfp-class');
			if(classes) {
				mfp.wrap.addClass( classes );
			}
		}
		

		mfp.currItem = mfp.items[0];
		mfp.index = 0;

		// We shift focus to the popup
		var focusTarget = options.focus;
		if(focusTarget) {
			$(focusTarget).focus();
		}
		
		// Bind events
		_document.on('keydown' + EVENT_NS, function(e) {
			if (e.keyCode === 27) {
				mfp.close();
			}
		});

		if(options.closeOnContentClick) {
			mfp.content.on('click' + EVENT_NS, function(e) {
				if(mfp._checkIfClose(e.target)) {
					mfp.close();
				}
			});
		}
		
		if(options.closeOnBgClick) {
			mfp.bgOverlay.on('click' + EVENT_NS, function() {
				mfp.close();
			});
		}

		// build preloader
		if(options.preloader) {
			mfp.st.preloader = _getEl('preloader', mfp.container, mfp.st.tLoading);
		} else {
			mfp.st.preloader = '';
		}

		// save current content type
		_prevContentType = mfp.currItem.type;

		// append background overlay
		$('body').append(mfp.bgOverlay);

		// append wrap
		mfp.wrap.appendTo( document.body );

		//
		_mfpTrigger(OPEN_EVENT);

		mfp.currItem.parsed = true;
		mfp.refreshContent(mfp.currItem);

		//
		mfp.st.callbacks.open(mfp.currItem);

	},

	/**
	 * Closes the popup
	 */
	close: function() {
		if(!mfp.isOpened) return;
		_mfpTrigger(BEFORE_CLOSE_EVENT);

		mfp.isOpened = false;
		// for CSS3 animation
		if(mfp.st.removalDelay && !mfp.isLowIE && mfp.supportsTransition)  {
			mfp.wrap.addClass(REMOVING_CLASS);
			setTimeout(function() {
				mfp._close();
			}, mfp.st.removalDelay);
		} else {
			mfp._close();
		}
	},

	/**
	 * Helper for close() function
	 */
	_close: function() {
		_mfpTrigger(CLOSE_EVENT);

		var classesToRemove = REMOVING_CLASS + ' ' + READY_CLASS + ' ';

		mfp.bgOverlay.detach();
		mfp.wrap.detach();
		mfp.container.empty();

		if(mfp.st.mainClass) {
			classesToRemove += mfp.st.mainClass + ' ';
		}

		mfp.wrap.removeClass(classesToRemove);

		_document.off('keydown' + EVENT_NS);
		mfp.content.off('click' + EVENT_NS);
		mfp.wrap.off('click' + EVENT_NS);
		mfp.bgOverlay.off('click' + EVENT_NS);
		
		_prevStatus = 2;

		// trigger event
		_mfpTrigger(AFTER_CLOSE_EVENT);
	},
	
	/**
	 * Updates Magnific Popup content
	 * @param  {Object}  item   The item object
	 * @param  {Boolean} keepFB Keep fallback content if item is not parsed
	 */
	refreshContent: function(item, keepFB) {
		
		mfp.content = _getEl('content');

		if(item.parsed) {
			item = mfp.items[mfp.index];
		} else {
			// if content is not parsed yet, we repeat check in 16ms
			setTimeout(function() {
				mfp.refreshContent(item);
			}, 16);
			return;
		}

		if(mfp.currItem.el) {
			// close button is inside content area
			if(mfp.st.closeBtnInside) {
				if(mfp.currItem.el.hasClass('mfp-close')) {
					mfp.currTemplate.closeBtn = mfp.currItem.el;
				} else {
					mfp.currTemplate.closeBtn = mfp.currItem.el.find('.mfp-close');
				}
			} else {
				mfp.currTemplate.closeBtn = _getCloseBtn(_prevContentType);
			}
		}
		

		// remove previous content
		mfp.contentContainer.empty();
		mfp.contentContainer.append(mfp.content);

		_mfpTrigger(CHANGE_EVENT, item);

		if(!mfp.content) {
			mfp.content = '';
		}

		if(item.type) {
			var contentType = item.type;
			if(contentType !== _prevContentType) {
				if(_prevContentType)
					mfp.container.removeClass('mfp-'+_prevContentType+'-holder');
				
				var holderClass = 'mfp-'+contentType+'-holder';
				mfp.container.addClass(holderClass);
				_prevContentType = contentType;
			}
		}
		

		//
		mfp.st.callbacks.change(item);
		mfp.content.append( mfp.currTemplate.closeBtn );
	},

	
	/**
	 * Check if a target is a close button or not
	 */
	_checkIfClose: function(target) {

		if($(target).hasClass(PREVENT_CLOSE_CLASS)) {
			return;
		}

		var closeBtn = mfp.st.closeBtnInside;
		if(closeBtn && mfp.currItem && mfp.currItem.el && mfp.currItem.el.hasClass('mfp-close')) {
			return true;
		}

		// If clicked on wrap or layover.
		if(
			mfp.wrap === target ||
			mfp.wrap.find(target).length
		) {
			return false;
		}

		if(
			mfp.content === target ||
			mfp.content.find(target).length
		) {
			if(closeBtn) {
				return false;
			} else {
				return true;
			}
		}

		return true;
	},
	_parseEl: function(index) {
		var item = mfp.items[index],
			type;

		if(item.el) {
			var dataMfpType = item.el.attr('data-mfp-type');
			if(dataMfpType) {
				item.type = dataMfpType;
			}
		}
		

		var dataObj = mfp.st.callbacks.parseEl(item, mfp);
		if(dataObj) {
			return dataObj;
		}

		if(item.hasOwnProperty('type')) {
			type = item.type;
		} else {
			var el = item.el;
			if(el) {
				var tag = el[0].tagName;

				if(tag === 'A') {
					if( el.attr('data-mfp-iframe') ) {
						type = 'iframe';
					} else {
						var href = el.attr('href');
						if(href) {
							if(href.indexOf('.jpg') > -1 || href.indexOf('.jpeg') > -1 || href.indexOf('.png') > -1 || href.indexOf('.gif') > -1) {
								type = 'image';
							} else if(href.charAt(0) === '#') {
								type = 'inline';
							}
						}
					}
				} else if(tag === 'IMG') {
					type = 'image';
				} else {
					type = 'inline';
				}
			} else {
				type = 'inline';
			}
		}
		item.type = type;
		item.parsed = true;

		return item;
	}

};


/*>>core*/

/*>>inline*/
$.magnificPopup.registerModule('inline', {
	options: {
		hiddenClass: 'hide', // will be appended with `mfp-` prefix
		markup: '',
		srcAction: 'inline'
	},
	_init: function() {
		_mfpOn(MARKUP_PARSE_EVENT + '.inline', function(e, markup) {
			if(mfp.currItem.type === 'inline') {
				if(!markup) {
					markup = '<div class="mfp-figure"></div>';
				}
				mfp.contentContainer = $(markup);
			}
		});
	}
});
/*>>inline*/

/*>>ajax*/
$.magnificPopup.registerModule('ajax', {

	options: {
		settings: null,
		cursor: 'mfp-ajax-cur',
		tError: '<a href="%url%">The content</a> could not be loaded.'
	},

	_init: function() {
		_mfpOn(CHANGE_EVENT + '.ajax', function() {
			if(mfp.currItem.type === 'ajax') {
				mfp.contentContainer.addClass(mfp.st.ajax.cursor);
				mfp.loadAjax();
			}
		});
		_mfpOn(CLOSE_EVENT + '.ajax', function() {
			if(mfp.st.ajax.cursor) {
				mfp.contentContainer.removeClass(mfp.st.ajax.cursor);
			}
		});
	},
	proto: {
		loadAjax: function() {
			mfp.xhr = $.ajax($.extend(mfp.st.ajax.settings, {
				url: mfp.currItem.src,
				success: function(data, textStatus, jqXHR) {
					var temp = {
						data:data,
						xhr:jqXHR
					};

					_mfpTrigger('ParseAjax', temp);

					mfp.appendContent( $(temp.data), 'ajax' );

					mfp.currItem.finished = true;

					_mfpTrigger('AjaxContentAdded');
				},
				error: function() {
					mfp.appendContent( $('<div>'+mfp.st.ajax.tError.replace('%url%', mfp.currItem.src)+'</div>'), 'ajax' );
					mfp.currItem.finished = true;
				}
			}));
		}
	}
});

/*>>ajax*/

/*>>image*/
var _imgInterval,
	_getTitle = function(item) {
		if(item.data && item.data.title !== undefined) 
			return item.data.title;

		var src = mfp.st.el.attr('title');
		if(src) {
			return src;
		}

		return '';
	};

$.magnificPopup.registerModule('image', {

	options: {
		markup: '<div class="mfp-figure">'+
					'<div class="mfp-close"></div>'+
					'<figure>'+
						'<div class="mfp-img"></div>'+
						'<figcaption>'+
							'<div class="mfp-bottom-bar">'+
								'<div class="mfp-title"></div>'+
								'<div class="mfp-counter"></div>'+
							'</div>'+
						'</figcaption>'+
					'</figure>'+
				'</div>',
		cursor: 'mfp-zoom-out-cur',
		titleSrc: 'title',
		verticalFit: true,
		tError: '<a href="%url%">The image</a> could not be loaded.'
	},

	_init: function() {
		_mfpOn(MARKUP_PARSE_EVENT + '.image', function(e, markup) {
			if(mfp.currItem.type === 'image') {
				mfp.contentContainer = $(markup);
			}
		});
		_mfpOn(OPEN_EVENT + '.image', function() {
			if(mfp.currItem.type === 'image') {
				mfp.wrap.addClass('mfp-image-holder');
			}
		});
		_mfpOn(CLOSE_EVENT + '.image', function() {
			if(mfp.currItem.type === 'image') {
				mfp.wrap.removeClass('mfp-image-holder');
			}
		});
		_mfpOn(CHANGE_EVENT + '.image', function() {
			if(mfp.currItem.type === 'image' && mfp.currItem.parsed && mfp.currItem.isLoaded) {
				return;
			}

			var item = mfp.currItem;

			var img = new Image();

			$(img).on('load' + EVENT_NS, function() {
				
				// mfp.स्ट.किंगcallback(img, item);

				item.img = $(img);
				mfp._onImageHasSize(item);

				mfp.currItem.isLoaded = true;
				mfp.currItem.finished = true;

				_mfpTrigger('ImageLoadComplete');
				
			}).on('error' + EVENT_NS, function() {
				item.img = false;
				mfp.currItem.isLoaded = true;
				mfp.currItem.finished = true;
				item.error = mfp.st.image.tError.replace('%url%', item.src);
				mfp._onImageHasSize(item);

				_mfpTrigger('ImageLoadComplete');
			});

			img.src = item.src;
		});
	},
	proto: {
		_onImageHasSize: function(item) {

			var el = mfp.content.find('.mfp-img');
			if(el.length) {
				el.empty();
			}
			

			if(item.img) {
				item.img.addClass(mfp.st.imgClass);
				el.append(item.img);
			} else {
				el.append( $('<div>').addClass('mfp-error').html(item.error) );
			}

			var figcaption = mfp.content.find('figcaption');
			if(figcaption.length) {
				var title = '';
				if(mfp.st.image.titleSrc === 'title') {
					title = _getTitle(item);
				} else if(mfp.st.image.titleSrc === 'alt') {
					title = item.img.attr('alt');
				}

				var counter = '';
				if(mfp.st.gallery && mfp.st.gallery.enabled) {
					counter = (mfp.items.length > 1 ? mfp.st.gallery.tCounter.replace('%curr%', mfp.index+1).replace('%total%', mfp.items.length) : '');
				}

				var titleEl = figcaption.find('.mfp-title');
				if(title) {
					titleEl.html(title);
				} else {
					titleEl.empty();
				}

				var counterEl = figcaption.find('.mfp-counter');
				if(counter) {
					counterEl.html(counter);
				} else {
					counterEl.empty();
				}
			}

			mfp.wrap.addClass(READY_CLASS);
			mfp.content.addClass(READY_CLASS);

			_mfpTrigger('Resize');
		},
		_checkImgSize: function(img) {

			var wH = mfp.st.image.verticalFit,
				wW = 0,
				hW = 0;

			if(wH) {
				var windowHeight = mfp.wrap.height();
				if(img.naturalHeight) {
					if( img.naturalHeight > windowHeight ) {
						wH = false;
					}
				} else {
					var imgEl = $('<img src="'+img.src+'" />');
					imgEl.css('position', 'absolute');
					imgEl.css('visibility', 'hidden');
					$('body').append(imgEl);
					var h = imgEl.height();
					imgEl.remove();
					if(h > windowHeight) {
						wH = false;
					}
				}
			}

			var maxHeight = mfp.wrap.height() - 20;

			if(wH) {
				img.css('max-height', maxHeight);
			}
		},
		initRetina: function() {
			if(window.devicePixelRatio > 1) {
				var st = mfp.st.image.retina;
				if(st.replace) {
					var img = mfp.currItem.img,
						src = img.attr('src');

					src = src.replace(st.ratio, '');

					if(st.replace(img, src)) {
						img.attr('src', src);
					}
				}
			}
		}
	}
});
/*>>image*/

/*>>zoom*/
var hasMozTransform,
	getHasMozTransform = function() {
		if(hasMozTransform === undefined) {
			hasMozTransform = document.createElement('p').style.MozTransform !== undefined;
		}
		return hasMozTransform;
	};

$.magnificPopup.registerModule('zoom', {

	options: {
		enabled: false,
		easing: 'ease-in-out',
		duration: 300,
		opener: function(element) {
			return element.is('img') ? element : element.find('img');
		}
	},

	_init: function() {
		var appVersion = navigator.appVersion;
		mfp.isLowIE = mfp.isIE8 = document.all && !document.addEventListener;
		mfp.isAndroid = (/android/gi).test(appVersion);
		mfp.isIOS = (/iphone|ipad|ipod/gi).test(appVersion);
		mfp.supportsTransition = supportsTransitions();

		var duration = mfp.st.zoom.duration,
			styles = {
				WebkitTransition: '-webkit-transform ' + duration + 'ms ' + mfp.st.zoom.easing,
				MozTransition:    '-moz-transform ' + duration + 'ms ' + mfp.st.zoom.easing,
				OTransition:      '-o-transform ' + duration + 'ms ' + mfp.st.zoom.easing,
				transition:       'transform ' + duration + 'ms ' + mfp.st.zoom.easing
			};

		_mfpOn(BEFORE_OPEN_EVENT + '.zoom', function() {
			
			var st = mfp.st.zoom,
				opener;

			if(!st.enabled || mfp.currItem. नोopener)
				return;

			if(mfp.currItem.el) {
				opener = st.opener(mfp.currItem.el);
			} else {
				opener = mfp.st.el;
			}

			if(!opener || !opener.length) {
				st.enabled = false;
				return;
			}

			var magnificPopup = $.magnificPopup.instance;

			mfp.st.mainClass = mfp.st.mainClass + ' mfp-zoom';

			var animConfig = {
				duration: duration,
				easing: 'linear'
			};

			var wrap = mfp.wrap,
				preloader = mfp.st.preloader;

			var animImg = $('<div>').addClass('mfp-figure').css({
				position: 'absolute'
			});
			animImg.append(opener.clone().removeAttr('style'));

			var animImgHolder = $('<div>').addClass('mfp-img-holder').append(animImg);

			var getPosition = function() {
				var openerContent = opener.offset();
					openerContent.top += parseInt(opener.css('margin-top'),10) || 0;
					openerContent.left += parseInt(opener.css('margin-left'),10) || 0;
				return openerContent;
			};

			var openAnimation = function() {
				var startPos = getPosition();

				var animImgSize = {
					width: opener.width(),
					height: opener.height()
				};

				animImg.css(animImgSize);

				var animImgFig = animImg.find('img');
				animImgFig.css({
					width: '100%',
					height: '100%'
				});

				var endPos = {
					top: _window.scrollTop(),
					left: Math.round( (_window.width() - animImgSize.width) / 2 )
				};

				var st = mfp.st.zoom;

				var zoomSt = {
					width: mfp.currItem.img.width(),
					height: mfp.currItem.img.height()
				};

				var zoomSt2 = {
					top: _window.scrollTop(),
					left: Math.round( (_window.width() - zoomSt.width) / 2 )
				};

				var cssObj = {
					top: startPos.top,
					left: startPos.left,
					width: animImgSize.width,
					height: animImgSize.height
				};

				var onTransitionEnd = function() {
					animImgHolder.remove();
					opener.css('visibility', 'visible');
					mfp.wrap.addClass(READY_CLASS);
					mfp.content.addClass(READY_CLASS);
				};

				animImgHolder.css(cssObj).appendTo('body');

				setTimeout(function() {
					animImgHolder.css({
						top: zoomSt2.top,
						left: zoomSt2.left,
						width: zoomSt.width,
						height: zoomSt.height
					});
				}, 16);

				setTimeout(function() {
					onTransitionEnd();
				}, duration + 50);
			};

			if(mfp.currItem.isLoaded) {
				openAnimation();
			} else {
				mfp.ev.one('ImageLoadComplete.zoom', openAnimation);
			}
		});
		_mfpOn(BEFORE_CLOSE_EVENT + '.zoom', function() {
			if(!mfp.st.zoom.enabled)
				return;

			var st = mfp.st.zoom,
				opener;

			if(mfp.currItem.el) {
				opener = st.opener(mfp.currItem.el);
			} else {
				opener = mfp.st.el;
			}

			if(!opener || !opener.length) {
				st.enabled = false;
				return;
			}

			var startPos = {
				width: opener.width(),
				height: opener.height()
			};

			var endPos = opener.offset();

			var cssObj = {
				width: mfp.content.width(),
				height: mfp.content.height(),
				left: mfp.content.offset().left,
				top: mfp.content.offset().top
			};

			var animImgHolder = $('<div>').addClass('mfp-figure').css({
				position: 'absolute'
			});
			animImgHolder.append(mfp.content.clone());
			animImgHolder.css(cssObj).appendTo('body');

			mfp.wrap.removeClass(READY_CLASS);
			mfp.content.removeClass(READY_CLASS);

			setTimeout(function() {
				animImgHolder.css({
					width: startPos.width,
					height: startPos.height,
					left: endPos.left,
					top: endPos.top
				});
			}, 16);

			setTimeout(function() {
				animImgHolder.remove();
			}, duration + 50);
		});

	}
});
/*>>zoom*/

/*>>iframe*/
$.magnificPopup.registerModule('iframe', {

	options: {
		markup: '<div class="mfp-iframe-scaler">'+
					'<div class="mfp-close"></div>'+
					'<iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe>'+
				'</div>',

		srcAction: 'iframe_src',

		// we don't care and support only one default type of URL by default
		patterns: {
			youtube: {
				index: 'youtube.com',
				id: 'v=',
				src: '//www.youtube.com/embed/%id%?autoplay=1'
			},
			vimeo: {
				index: 'vimeo.com/',
				id: '/',
				src: '//player.vimeo.com/video/%id%?autoplay=1'
			},
			gmaps: {
				index: '//maps.google.',
				src: '%id%&output=embed'
			}
		}
	},

	_init: function() {
		_mfpOn(MARKUP_PARSE_EVENT + '.iframe', function(e, markup) {
			if(mfp.currItem.type === 'iframe') {
				mfp.contentContainer = $(markup);
			}
		});
		_mfpOn(CHANGE_EVENT + '.iframe', function() {
			if(mfp.currItem.type === 'iframe') {
				var item = mfp.currItem,
					iframe = mfp.content.find('iframe');

				if(iframe.length) {
					// remove preloader if there is no src
					if(!item.src) {
						mfp.st.preloader = '';
					}
					
					iframe.attr('src', item.src);
				}
			}
		});
	},
	proto: {
		_getIframeURL: function(item) {
			var url = item.src,
				p = mfp.st.iframe.patterns,
				i, id;

			for(i in p) {
				if(url.indexOf(p[i].index) > -1) {
					if(p[i].id) {
						if(typeof p[i].id === 'string') {
							id = url.substr(url.lastIndexOf(p[i].id)+p[i].id.length, url.length);
						} else {
							id = p[i].id.call(this, url);
						}
					}
					url = p[i].src.replace('%id%', id);
					break;
				}
			}
			return url;
		}
	}
});
/*>>iframe*/

/*>>gallery*/
/**
 * Get looped index depending on number of items
 */
var _getLoopedId = function(index) {
	var numSlides = mfp.items.length;
	if(index > numSlides - 1) {
		return index - numSlides;
	} else  if(index < 0) {
		return numSlides + index;
	}
	return index;
},
_replaceCurrTotal = function(text, curr, total) {
	return text.replace(/%curr%/gi, curr + 1).replace(/%total%/gi, total);
};

$.magnificPopup.registerModule('gallery', {

	options: {
		enabled: false,
		arrowMarkup: '<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',
		preload: [0,2],
		navigateByImgClick: true,
		arrows: true,

		tPrev: 'Previous (Left arrow key)',
		tNext: 'Next (Right arrow key)',
		tCounter: '%curr% of %total%'
	},

	_init: function() {

		var gSt = mfp.st.gallery,
			ns = '.mfp-gallery';
		
		mfp.direction = true; // true for next, false for prev
		
		if(!gSt || !gSt.enabled ) return false;

		_wrapClasses += ' mfp-gallery';

		_mfpOn(OPEN_EVENT + ns, function() {

			if(gSt.navigateByImgClick) {
				mfp.wrap.on('click' + ns, '.mfp-img', function() {
					if(mfp.items.length > 1) {
						mfp.next();
						return false;
					}
				});
			}

			_document.on('keydown' + ns, function(e) {
				if (e.keyCode === 37) {
					mfp.prev();
				} else if (e.keyCode === 39) {
					mfp.next();
				}
			});
		});

		_mfpOn('UpdateStatus' + ns, function(e, data) {
			if(data.scroll) {
				var l = mfp.items.length;
				data.scroll = {
					x: Math.round( (mfp.index - data.index) / l * mfp.wrap.width() ),
					y: Math.round( (mfp.index - data.index) / l * mfp.wrap.height() )
				};
			}
		});

		_mfpOn(MARKUP_PARSE_EVENT + ns, function(e, markup) {
			if(gSt.enabled) {
				var arrowTypes = ['prev', 'next'];
				for(var i=0; i<arrowTypes.length; i++) {
					var dir = arrowTypes[i];
					var arrow = $(gSt.arrowMarkup.replace(/%title%/gi, gSt['t'+dir]).replace(/%dir%/gi, dir));
					arrow.addClass(PREVENT_CLOSE_CLASS).on('click', function() {
						mfp[this.className.indexOf('next')>-1 ? 'next' : 'prev']();
					});
					mfp.contentContainer.append(arrow);
				}
			}
		});

		_mfpOn(CHANGE_EVENT + ns, function() {
			if(mfp.items.length > 1) {
				mfp.wrap.removeClass('mfp-gallery-single');
			} else {
				mfp.wrap.addClass('mfp-gallery-single');
			}
		});
	},
	proto: {
		next: function() {
			mfp.direction = true;
			mfp.index = _getLoopedId(mfp.index + 1);
			mfp.updateItemHTML();
		},
		prev: function() {
			mfp.direction = false;
			mfp.index = _getLoopedId(mfp.index - 1);
			mfp.updateItemHTML();
		},
		goTo: function(newIndex) {
			mfp.direction = (newIndex >= mfp.index);
			mfp.index = newIndex;
			mfp.updateItemHTML();
		},
		preload: function() {
			var p = mfp.st.gallery.preload,
				l = mfp.items.length,
				i;

			if(p.length === 0) return;

			for(i = 0; i < p.length; i++) {
				var index = mfp.index + (i === 0 ? 0 : (i%2 === 0 ? -Math.ceil(i/2) : Math.ceil(i/2) ) );
				index = _getLoopedId(index);
				
				if(mfp.items[index] && !mfp.items[index].parsed) {
					mfp._parseEl(index);
				}
			}
		}
	}
});
/*>>gallery*/

/*>>retina*/
$.magnificPopup.registerModule('retina', {
	options: {
		replace: function(item, ratio) {
			return item.src.replace(/\.\w+$/, function(m) { return '@2x' + m; });
		},
		ratio: 1 // Function or number.  Set to 1 to disable.
	},
	_init: function() {
		_mfpOn('ImageLoadComplete.retina', function() {
			if(window.devicePixelRatio > 1) {
				var st = mfp.st.retina,
					img = mfp.currItem.img;

				if(st.ratio > 1) {
					var r = st.ratio;
					
					var newSrc = st.replace(img, r);

					if(newSrc) {
						img.attr('src', newSrc);
					}
				}
			}
		});
	}
});
/*>>retina*/
_checkInstance(); 
}));